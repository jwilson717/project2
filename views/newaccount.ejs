<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Create Account</title>
   <link rel="stylesheet" type='text/css' href="/css/bootstrap.css">
   <link rel="stylesheet" type='text/css' href="/css/styles.css">
   <link rel="stylesheet" type='text/css' href="/css/newaccountStyles.css">
</head>
<body>
   <main class='container'>
      <div class='row align-items-center justify-content-center'>
         <div class='col-lg-6 col-sm-12 col-md-12 my-auto border-dark rounded shadow-lg text-center p-3'>
            <h1>Create Account</h1>
            <hr>
            <div id='error'></div>
            <form>
               <div class='form-group input-group'>
                  <input type="text" name="fname" id="fname" class='form-control' placeholder="First Name" required>
               </div>
               <div class='form-group input-group'>
                  <input type="text" name="lname" id="lname" class='form-control' placeholder="Last Name" required>
               </div>
               <div class='form-group input-group'>
                  <input type="text" name="email" id="email" class='form-control' placeholder="Email" required>
               </div>
               <div class='form-group input-group'>
                  <input type="text" name="username" id="username" class='form-control' placeholder="Username" required>
               </div>
               <div class='form-group input-group'>
                  <input type="password" name="password" id="password" class='form-control' placeholder="Password" required>
               </div>
               <button type='button' class='btn btn-primary' onclick='create()'>Create Account</button>
            </form>
         </div>
      </div>      
   </main>
   <script>
      function create() {
         console.log('test');
         let fname = document.getElementById('fname').value;
         let lname = document.getElementById('lname').value;
         let email = document.getElementById('email').value;
         let username = document.getElementById('username').value;
         let password = document.getElementById('password').value;
      
         console.log('Test');
         let data = {fname: fname, lname: lname, email: email, username: username, password: password};

         let ajax = new XMLHttpRequest();
         ajax.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
               document.getElementById('error').innerHTML = this.responseText;
            }
         };
         ajax.open('POST', '/newaccount', true);
         ajax.setRequestHeader('Content-Type', 'application/json');
         ajax.send(JSON.stringify(data));
      }
   </script>
</body>
</html>